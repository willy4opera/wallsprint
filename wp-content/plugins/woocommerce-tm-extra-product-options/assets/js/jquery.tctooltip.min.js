!function(m,v){"use strict";function l(t,i){return this.targets=v(t),this.settings=v.extend({},v.fn.tcToolTip.defaults,i),0<this.targets.length&&(this.init(),this)}var n;v(function(){n=m.TMEPOJS||{tm_epo_global_tooltip_max_width:"340px"}}),l.prototype={constructor:l,removeTooltip:function(t,i){var o=this.settings;t.data("is_moving")||(i.removeClass(o.fadin).addClass(o.fadeout),i.animate({opacity:0},o.speed,function(){v(this).remove()}),t.data("tmtip-title")&&void 0===t.data("tm-tip-html")&&!t.attr("data-tm-tooltip-html")&&t.attr("title",t.data("tmtip-title")),v(m).off("scroll.tcToolTip resize.tcToolTip"),o.onetime&&this.destroy())},initTooltip:function(t,i,o){var e,a,l,s,d=this.settings;t&&i&&1===t.length&&1===i.length&&1===t.data("tm-has-tm-tip")&&(1===o&&(e=void 0!==t.data("tm-tip-html")?t.data("tm-tip-html"):t.attr("data-tm-tooltip-html")?t.attr("data-tm-tooltip-html"):t.attr("title"),i.html(e),t.data("is_moving",!0)),i.find("aside").hide(),""===n.tm_epo_global_tooltip_max_width?v(m).width()<=1.2*i.outerWidth()?i.css("max-width",v(m).width()/1.2+"px"):i.css("max-width","340px"):(n.tm_epo_global_tooltip_max_width.isNumeric()&&(n.tm_epo_global_tooltip_max_width=n.tm_epo_global_tooltip_max_width+"px"),i.css("max-width",n.tm_epo_global_tooltip_max_width)),i.find("aside").show(),i.css({left:"",right:"",top:""}),e=v.epoAPI.dom.scroll(),(s=a=t.offset().left+t.outerWidth()/2-i.outerWidth()/2)<0?(a=t.offset().left+t.outerWidth()/2-20,i.addClass("left")):i.removeClass("left"),0<=s&&a+i.outerWidth()>v(m).width()?((a=t.offset().left-i.outerWidth()+t.outerWidth()/2+20)<0&&(a-=10,i.css("max-width","calc("+i.css("max-width")+" - "+Math.abs(a)+"px)"),a=10),i.addClass("right")):i.removeClass("right"),i.css({left:a,right:"auto",top:l}),l=t.offset().top-i.outerHeight()-10,s=t.offset().top-e.top-i.outerHeight()-10,l<0||s<0?(l=t.offset().top+t.outerHeight()+10,i.addClass("top"),i.removeClass("bottom")):(i.removeClass("top"),i.addClass("bottom")),v(m).trigger("tm_tooltip_show"),o?(i.css({left:a,top:l}),t.data("is_moving",!1)):i.css({left:a,top:l}).removeClass(d.fadeout).addClass(d.fadin))},show:function(t){var i,o=this.settings;if(!t.data("is_moving"))return 1===t.data("tm-has-tm-tip")&&(void 0!==t.data("tm-tip-html")?(i=t.data("tm-tip-html"),t.attr("title")&&t.data("tmtip-title",t.attr("title")),t.removeAttr("title")):t.attr("data-tm-tooltip-html")?(i=t.attr("data-tm-tooltip-html"),t.attr("title")&&t.data("tmtip-title",t.attr("title")),t.removeAttr("title")):i=t.attr("title"),void 0!==i)&&(v("#tm-tooltip").remove(),o.tipclass?o.tipclass=" "+o.tipclass:o.tipclass="",(o=v('<div id="tm-tooltip" class="tm-tip tm-animated'+o.tipclass+'"></div>')).css("opacity",0).html(i).appendTo("body"),0<(i=o.find("img")).length&&i.on("load",this.initTooltip.bind(this,t,o)),this.initTooltip(t,o),v(m).on("scroll.tcToolTip resize.tcToolTip",this.initTooltip.bind(this,t,o)),t.data("is_moving",!1),t.on("tmmovetooltip",this.initTooltip.bind(this,t,o,1)),t.on("mouseleave.tc tmhidetooltip",this.removeTooltip.bind(this,t,o)),t.closest("label").on("mouseleave.tc tmhidetooltip",this.removeTooltip.bind(this,t,o)),o.on("click",this.removeTooltip.bind(this,t,o))),!1},destroy:function(){0<this.targets.length&&(this.targets.toArray().forEach(function(t){t=v(t);t.closest("off").on("mouseleave.tc tmhidetooltip"),t.off("tc-tooltip-html-changed tmmovetooltip tmhidetooltip mouseenter.tc mouseleave.tc tmshowtooltip.tc"),t.removeData("tmtip-title"),t.removeData("tm-tip-html")}),this.targets.removeData("tctooltip tm-has-tm-tip is_moving"))},init:function(){var g=this,u=this.settings;0<this.targets.length&&this.targets.toArray().forEach(function(t){var i,o,e,a,l,s,d,m,n,r,p,h,c,f=v(t),t=u.tip||void 0;void 0===f.data("tm-has-tm-tip")&&(i=f.attr("data-tm-tooltip-swatch"),o=f.attr("data-tm-tooltip-swatch-desc"),e=f.attr("data-tm-tooltip-swatch-lbl-desc"),a=f.attr("data-tm-tooltip-swatch-img"),l=f.attr("data-tm-tooltip-swatch-img-lbl"),s=f.attr("data-tm-tooltip-swatch-img-desc"),d=f.attr("data-tm-tooltip-swatch-img-lbl-desc"),f.data("tm-has-tm-tip",1),r=void 0!==f.attr("data-original")?f.attr("data-original"):void 0!==f.attr("src")?void 0!==f.attr("data-src")?f.attr("data-src"):f.attr("src"):f[0].src,0===(p=0===(p=0===(p=(c=0===(c=(c=0===(c=(c=f.closest(".tmcp-field-wrap")).is(".tc-epo-element-product-holder")?f.closest(".cpf-element"):c).length?f.closest(".cpf-element"):c).is(".cpf-type-product")&&0===f.closest(".tm-epo-element-label").length&&f.closest(".cpf-section").length?f.closest(".cpf-section").find(".tc-section-inner-wrap .tm-section-description.tm-description"):c).length?f.closest(".cpf-section").find(".tc-section-inner-wrap .tm-section-description.tm-description"):c).find(".tm-tip-html")).length?c.find(".checkbox-image-label,.checkbox-image-label-inline,.radio-image-label,.radio-image-label-inline"):p).length?c.next(".checkbox-image-label,.checkbox-image-label-inline,.radio-image-label,.radio-image-label-inline,.tm-tip-html"):p).length&&c.is(".tm-description")&&(p=c),(c=(p=v(c=p)).find(".tc-label-text")).length||(c=p),h="yes"===f.attr("data-tm-hide-label")||void 0===f.attr("data-tm-hide-label")||p.is(".tm-tip-html"),n="",0===(m=(m=f.closest(".tmcp-field-wrap")).find("[data-tm-tooltip-html]")).length?0<(m=f.closest(".tmcp-field-wrap").find(".tc-inline-description")).length&&(n=m.html()):n=m.attr("data-tm-tooltip-html"),void 0===t?(i?t=c.html():o&&""!==n?t="<aside>"+n+"</aside>":!e||""===c.html()&&""===n?a&&""!==r?t='<img src="'+r+'">':!l||""===c.html()&&""===r?!s||""===r&&""===n?!d||""===c.html()&&""===r&&""===n||(t='<img src="'+r+'"><aside>'+c.html()+"</aside><aside>"+n+"</aside>"):t='<img src="'+r+'"><aside>'+n+"</aside>":t='<img src="'+r+'"><aside>'+c.html()+"</aside>":t="<aside>"+c.html()+"</aside><aside>"+n+"</aside>",void 0!==t&&(f.data("tm-tip-html",t),h)&&(p.find(".tm-tooltip").remove(),c.hide()),void 0===t&&(t=f.attr("data-tm-tooltip-html")?f.attr("data-tm-tooltip-html"):f.attr("title"))):f.data("tm-tip-html",t),f.on("tc-tooltip-html-changed",function(){f.attr("data-tm-tooltip-html")?f.show():f.hide()}),f.is("img")&&f.closest("label").on("mouseenter tmshowtooltip",g.show.bind(g,f)),f.on("mouseenter.tc tmshowtooltip.tc",g.show.bind(g,f)),u.trigger)&&g.show(f)})}},v.fn.tcToolTip=function(t){var i,o,e=v(this),a="object"==typeof t?t:{};return e.map(function(){return v(this).data("tctooltip")||""}).get().some(function(t){return""===t})&&(o=new l(this,a),e.data("tctooltip",o)),void 0===(i="string"==typeof t?(o=e.data("tctooltip"))[t].apply(o,[]):i)?e:i},v.fn.tcToolTip.defaults={fadin:"fadein",fadeout:"fadeout",speed:1500},v.fn.tcToolTip.instances=[],v.fn.tcToolTip.Constructor=l,v.tcToolTip=function(t,i){var o=!1;return(t=t||v(".tm-tooltip")).map(function(){return v(this).data("tctooltip")||""}).get().some(function(t){return""===t})&&(o=new l(t,i),t.data("tctooltip",o)),o}}(window,window.jQuery);